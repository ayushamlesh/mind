<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Payments Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
body{font-family:Inter,sans-serif;background:#f5f7fb}
.card-ui{background:#fff;border-radius:14px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.06)}
.metric{font-size:26px;font-weight:600}
.neg{color:#dc3545}
.pos{color:#28a745}
.muted{color:#6c757d}
.area-card{cursor:pointer;transition:.2s}
.area-card:hover{transform:translateY(-3px)}
#detailPanel{width:520px;display:none;z-index:3000}
</style>
</head>

<body>

<!-- HEADER -->
<nav class="navbar navbar-dark bg-dark px-4">
<span class="navbar-brand fw-semibold">
<i class="bi bi-credit-card"></i> Payments & Transaction Monitoring
</span>

<div class="d-flex gap-2 align-items-center">
<select class="form-select form-select-sm" style="width:220px">
<option selected>Last 15 minutes</option>
<option>Last 30 minutes</option>
<option>Last 1 hour</option>
<option>Last 4 hours</option>
<option>Last 24 hours</option>
<option>Custom (Max 7 days)</option>
</select>
</div>
</nav>

<div class="container-fluid p-4">

<!-- ALERT -->
<div class="alert alert-warning mb-4">
<strong>⚠ Attention Needed:</strong>
Debit approvals dropped in Fuel Pumps (Store 101).  
HOST_TIMEOUT contributing to 42% of declines.
</div>

<!-- TABS -->
<ul class="nav nav-tabs mb-4">
<li class="nav-item">
<a class="nav-link active" data-bs-toggle="tab" href="#paymentTab">
<i class="bi bi-bar-chart"></i> Payment Dashboard
</a>
</li>
<li class="nav-item">
<a class="nav-link" data-bs-toggle="tab" href="#monitorTab">
<i class="bi bi-activity"></i> Transaction Monitoring
</a>
</li>
</ul>

<div class="tab-content">

<!-- PAYMENT DASHBOARD -->
<div class="tab-pane fade show active" id="paymentTab">

<!-- KPI -->
<div class="row g-4 mb-4">
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Total Txns</div><div class="metric">42,180</div></div></div>
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Revenue</div><div class="metric">$1.28M</div></div></div>
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Approval %</div><div class="metric">94.1%</div></div></div>
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Decline %</div><div class="metric neg">5.9%</div></div></div>
</div>

<!-- PAYMENT SPLIT -->
<h6>Payment Type Distribution</h6>
<div class="row g-4 mb-4">
<div class="col-md-4"><div class="card-ui">Debit<br><strong>61%</strong></div></div>
<div class="col-md-4"><div class="card-ui">Credit<br><strong>32%</strong></div></div>
<div class="col-md-4"><div class="card-ui">Gift<br><strong>7%</strong></div></div>
</div>

<!-- BUSINESS INSIGHT -->
<div class="card-ui">
<strong>Insight</strong><br>
Debit decline rate is above normal baseline (↑2.3%).  
Potential impact on fuel & pharmacy sales.
</div>

</div>

<!-- TRANSACTION MONITORING -->
<div class="tab-pane fade" id="monitorTab">

<!-- FLOW HEALTH -->
<div class="card-ui mb-4">
<div class="muted">Transaction Flow Health</div>
<div class="metric neg">
Debit approvals dropped from 96.2% → 88.1%
</div>
<div class="small muted">Compared to previous 15 minutes</div>
</div>

<!-- DECLINE INTELLIGENCE -->
<h6>Decline Intelligence</h6>
<div class="card-ui mb-4">
<table class="table table-sm">
<thead>
<tr><th>Category</th><th>Reason</th><th>%</th><th>Primary Area</th></tr>
</thead>
<tbody>
<tr><td>Host</td><td>HOST_TIMEOUT</td><td class="neg">42%</td><td>Fuel Pumps</td></tr>
<tr><td>Network</td><td>NO_RESPONSE</td><td>18%</td><td>Fuel Pumps</td></tr>
<tr><td>Card</td><td>INSUFFICIENT_FUNDS</td><td>9%</td><td>Pharmacy</td></tr>
</tbody>
</table>
</div>

<!-- AREA IMPACT -->
<h6>Area Impact</h6>
<div class="row g-4 mb-4">
<div class="col-md-3">
<div class="card-ui area-card" onclick="openDetail()">
<strong>Fuel Pumps</strong><br>
3 terminals contributing<br>
<span class="neg">82% of total declines</span>
</div>
</div>
<div class="col-md-3">
<div class="card-ui">
<strong>Pharmacy</strong><br>
Normal card declines only
</div>
</div>
</div>

</div>
</div>
</div>

<!-- DETAIL PANEL -->
<div id="detailPanel" class="position-fixed top-0 end-0 bg-white h-100 shadow-lg overflow-auto">
<div class="p-3 border-bottom d-flex justify-content-between">
<strong>Fuel Pumps – Root Cause View</strong>
<button class="btn btn-sm btn-outline-secondary" onclick="closeDetail()">✕</button>
</div>

<div class="p-3">

<h6>Impacted Terminals</h6>
<table class="table table-sm">
<thead>
<tr><th>Terminal</th><th>Decline %</th><th>Top Error</th><th>Since</th></tr>
</thead>
<tbody>
<tr><td>FP-02</td><td class="neg">34%</td><td>HOST_TIMEOUT</td><td>12 min</td></tr>
<tr><td>FP-03</td><td class="neg">29%</td><td>HOST_TIMEOUT</td><td>14 min</td></tr>
<tr><td>FP-01</td><td class="neg">19%</td><td>NO_RESPONSE</td><td>10 min</td></tr>
</tbody>
</table>

<h6 class="mt-4">Recent Transactions</h6>
<table class="table table-sm">
<thead>
<tr><th>Txn ID</th><th>Card</th><th>Status</th><th>Reason</th></tr>
</thead>
<tbody>
<tr><td>TX88102</td><td>Debit</td><td class="neg">Declined</td><td>HOST_TIMEOUT</td></tr>
<tr><td>TX88103</td><td>Debit</td><td class="neg">Declined</td><td>HOST_TIMEOUT</td></tr>
</tbody>
</table>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
function openDetail(){
document.getElementById("detailPanel").style.display="block";
}
function closeDetail(){
document.getElementById("detailPanel").style.display="none";
}
</script>

</body>
</html>
