
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Payment Monitoring Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background:#f4f6f9; }
        .card { border-radius:14px; }
        .kpi { font-size:22px; font-weight:600; }
        .muted { color:#6c757d; font-size:13px; }
        .pill { padding:6px 12px; border-radius:20px; font-size:12px; font-weight:600; }
        .pill-green { background:#e6f7ee; color:#198754; }
        .pill-yellow { background:#fff3cd; color:#997404; }
        .pill-red { background:#fdecea; color:#dc3545; }
        .store-row { cursor:pointer; }
        .store-row:hover { background:#f1f5ff; }
        .terminal-card { border-left:6px solid #dee2e6; }
        .terminal-red { border-left-color:#dc3545; }
        .terminal-yellow { border-left-color:#ffc107; }
        .terminal-green { border-left-color:#198754; }
        .time-btn.active { background:#0d6efd; color:#fff; }
        .sticky-header { position:sticky; top:0; z-index:10; background:#f4f6f9; }
    </style>
</head>
<body>
<div class="container-fluid p-4">

<!-- HEADER -->
<div class="d-flex justify-content-between align-items-center mb-3 sticky-header">
    <h4 class="fw-bold">Payment Operations Command Center</h4>
    <div class="btn-group">
        <button class="btn btn-outline-secondary time-btn active" onclick="setTime(this,'15m')">15m</button>
        <button class="btn btn-outline-secondary time-btn" onclick="setTime(this,'30m')">30m</button>
        <button class="btn btn-outline-secondary time-btn" onclick="setTime(this,'24h')">24h</button>
        <button class="btn btn-outline-secondary time-btn" onclick="setTime(this,'48h')">48h</button>
        <button class="btn btn-outline-secondary time-btn" onclick="setTime(this,'allday')">All Day</button>
    </div>
</div>

<!-- GLOBAL KPIs -->
<div class="row g-3 mb-4">
    <div class="col-md-3"><div class="card p-3"><div class="muted">Stores</div><div class="kpi">200</div></div></div>
    <div class="col-md-3"><div class="card p-3"><div class="muted">Terminals</div><div class="kpi">12,430</div></div></div>
    <div class="col-md-3"><div class="card p-3"><div class="muted">Approval %</div><div class="kpi">91.6%</div></div></div>
    <div class="col-md-3"><div class="card p-3"><div class="muted">Vs Yesterday</div><div class="kpi text-danger">-3.2%</div></div></div>
</div>

<!-- STORE HEALTH -->
<div class="row g-3 mb-4">
    <div class="col-md-4"><div class="card p-3" onclick="applyStoreFilter('green')" style="cursor:pointer;"><span class="pill pill-green">Healthy</span><div class="kpi">170</div></div></div>
    <div class="col-md-4"><div class="card p-3" onclick="applyStoreFilter('yellow')" style="cursor:pointer;"><span class="pill pill-yellow">Watch</span><div class="kpi">20</div></div></div>
    <div class="col-md-4"><div class="card p-3" onclick="applyStoreFilter('red')" style="cursor:pointer;"><span class="pill pill-red">Impacted</span><div class="kpi">10</div></div></div>
</div>

<!-- ALL STORES -->
<div class="card">
    <div class="card-header d-flex justify-content-between">
        <span class="fw-semibold">All Stores</span>
        <input class="form-control form-control-sm w-25" placeholder="Search store" onkeyup="searchStore(this.value)">
    </div>
    <div class="table-responsive" style="max-height:420px;">
        <table class="table table-hover mb-0">
            <thead><tr><th>Store</th><th>Txn</th><th>Approval %</th><th>Vs Yesterday</th><th>Impacted</th><th>Status</th></tr></thead>
            <tbody id="storeTable"></tbody>
        </table>
    </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ---------- DUMMY DATA ----------
const stores = [];
let id = 1;

function createStore(type){
    const terminals = [];
    let red = type==='red'?8:type==='yellow'?2:0;
    let yellow = type==='red'?5:type==='yellow'?3:1;
    const total = 60;

    for(let i=0;i<total;i++){
        let health='green';
        if(i<red) health='red'; else if(i<red+yellow) health='yellow';
        terminals.push({health});
    }

    return {id:id++, name:`Store ${id-1}`, txn:Math.floor(Math.random()*8000), approval:90+Math.random()*5, yesterday:(Math.random()*6-3).toFixed(1), terminals};
}

for(let i=0;i<170;i++) stores.push(createStore('green'));
for(let i=0;i<20;i++) stores.push(createStore('yellow'));
for(let i=0;i<10;i++) stores.push(createStore('red'));

function getStatus(s){ return s.terminals.filter(t=>t.health==='red').length>5?'red':s.terminals.some(t=>t.health==='red')?'yellow':'green'; }

function renderStores(list=stores){
    const tb=document.getElementById('storeTable'); tb.innerHTML='';
    list.forEach(s=>{
        const st=getStatus(s);
        tb.innerHTML+=`<tr class='store-row'><td>${s.name}</td><td>${s.txn}</td><td>${s.approval.toFixed(1)}%</td><td>${s.yesterday}%</td><td>${s.terminals.filter(t=>t.health==='red').length}</td><td><span class='pill pill-${st}'>${st}</span></td></tr>`;
    });
}

function applyStoreFilter(status){ renderStores(stores.filter(s=>getStatus(s)===status)); }

function searchStore(v){
    const value=v.toLowerCase();
    renderStores(stores.filter(s=>s.name.toLowerCase().includes(value)));
}

function setTime(btn){ document.querySelectorAll('.time-btn').forEach(b=>b.classList.remove('active')); btn.classList.add('active'); }

renderStores();
</script
    >
</body>
                                                                                   </html>
