<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Payments Monitoring Console</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
body{font-family:Inter,sans-serif;background:#f4f6f9}
.card-ui{background:#fff;border-radius:14px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.06)}
.metric{font-size:26px;font-weight:600}
.neg{color:#dc3545}
.pos{color:#28a745}
.muted{color:#6c757d}
.area-card{cursor:pointer;transition:.2s}
.area-card:hover{transform:translateY(-3px)}
.alert-bar{background:#fff3cd;border-left:6px solid #ffc107}
#storeView{display:none}
#detailPanel{width:520px;display:none;z-index:3000}
</style>
</head>

<body>

<!-- HEADER -->
<nav class="navbar navbar-dark bg-dark px-4">
<span class="navbar-brand fw-semibold">
<i class="bi bi-credit-card"></i> Payments Monitoring Console
</span>

<div class="d-flex gap-2 align-items-center">
<select class="form-select form-select-sm" style="width:200px">
<option selected>Last 15 minutes</option>
<option>Last 30 minutes</option>
<option>Last 1 hour</option>
<option>Last 4 hours</option>
<option>Last 24 hours</option>
<option>Custom (Max 7 days)</option>
</select>

<select class="form-select form-select-sm" style="width:160px" onchange="selectStore(this.value)">
<option value="">All Stores</option>
<option value="101">Store 101</option>
<option value="102">Store 102</option>
</select>
</div>
</nav>

<div class="container-fluid p-4">

<!-- GLOBAL ALERT -->
<div class="alert alert-bar mb-4">
<strong>⚠ Global Insights:</strong>
Debit approval dropped below baseline in <strong>2 stores</strong>.  
HOST_TIMEOUT trending in Fuel category.
</div>

<!-- ===================== GLOBAL VIEW ===================== -->
<div id="globalView">

<h5 class="mb-3">Overall Payment Health</h5>
<div class="row g-4 mb-4">
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Total Txns</div><div class="metric">84,220</div></div></div>
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Approval %</div><div class="metric">94.3%</div></div></div>
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Decline %</div><div class="metric neg">5.7%</div></div></div>
<div class="col-md-3"><div class="card-ui text-center"><div class="muted">Impacted Stores</div><div class="metric neg">2</div></div></div>
</div>

<h6 class="mb-2">Store Comparison</h6>
<div class="card-ui mb-4">
<table class="table table-sm">
<thead>
<tr><th>Store</th><th>Status</th><th>Approval %</th><th>Top Issue</th></tr>
</thead>
<tbody>
<tr onclick="selectStore('101')" style="cursor:pointer">
<td>Store 101</td><td class="neg">Degraded</td><td>88.1%</td><td>HOST_TIMEOUT</td>
</tr>
<tr onclick="selectStore('102')" style="cursor:pointer">
<td>Store 102</td><td class="pos">Healthy</td><td>95.6%</td><td>Normal</td>
</tr>
</tbody>
</table>
</div>

</div>

<!-- ===================== STORE VIEW ===================== -->
<div id="storeView">

<h5 class="mb-3">Store 101 – Payment Overview</h5>

<div class="row g-4 mb-4">
<div class="col-md-3"><div class="card-ui"><div class="muted">Total Terminals</div><div class="metric">42</div></div></div>
<div class="col-md-3"><div class="card-ui"><div class="muted">Impacted Terminals</div><div class="metric neg">5</div></div></div>
<div class="col-md-3"><div class="card-ui"><div class="muted">Approval %</div><div class="metric neg">88.1%</div></div></div>
<div class="col-md-3"><div class="card-ui"><div class="muted">Txn Volume</div><div class="metric">12,480</div></div></div>
</div>

<h6>Transaction Mix</h6>
<div class="row g-4 mb-4">
<div class="col-md-4"><div class="card-ui">Debit<br><strong>62%</strong> | Decline <span class="neg">11.9%</span></div></div>
<div class="col-md-4"><div class="card-ui">Credit<br><strong>30%</strong> | Decline 3.6%</div></div>
<div class="col-md-4"><div class="card-ui">Gift<br><strong>8%</strong> | Decline 1.4%</div></div>
</div>

<h6>Area Health</h6>
<div class="row g-4 mb-4">
<div class="col-md-3">
<div class="card-ui area-card" onclick="openDetail()">
<strong>Fuel Pumps</strong><br>
1,240 txns<br>
<span class="neg">12.8% decline</span><br>
Top: HOST_TIMEOUT
</div>
</div>
<div class="col-md-3">
<div class="card-ui">
<strong>Pharmacy</strong><br>
820 txns<br>
6.1% decline<br>
Top: Card Declines
</div>
</div>
</div>

<h6>Decline Intelligence</h6>
<div class="card-ui mb-4">
<table class="table table-sm">
<thead>
<tr><th>Category</th><th>Reason</th><th>%</th><th>Impact Area</th></tr>
</thead>
<tbody>
<tr><td>Host</td><td>HOST_TIMEOUT</td><td class="neg">42%</td><td>Fuel</td></tr>
<tr><td>Network</td><td>NO_RESPONSE</td><td>18%</td><td>Fuel</td></tr>
<tr><td>Card</td><td>INSUFFICIENT_FUNDS</td><td>9%</td><td>Pharmacy</td></tr>
</tbody>
</table>
</div>

</div>

</div>

<!-- ===================== DETAIL PANEL ===================== -->
<div id="detailPanel" class="position-fixed top-0 end-0 bg-white h-100 shadow-lg overflow-auto">
<div class="p-3 border-bottom d-flex justify-content-between">
<strong>Fuel Pumps – Terminal Impact</strong>
<button class="btn btn-sm btn-outline-secondary" onclick="closeDetail()">✕</button>
</div>

<div class="p-3">

<h6>Impacted Terminals</h6>
<table class="table table-sm">
<thead>
<tr><th>Terminal</th><th>% Declines</th><th>Top Error</th><th>Since</th></tr>
</thead>
<tbody>
<tr><td>FP-02</td><td class="neg">34%</td><td>HOST_TIMEOUT</td><td>12 min</td></tr>
<tr><td>FP-03</td><td class="neg">29%</td><td>HOST_TIMEOUT</td><td>14 min</td></tr>
<tr><td>FP-01</td><td class="neg">19%</td><td>NO_RESPONSE</td><td>10 min</td></tr>
</tbody>
</table>

<h6 class="mt-4">Recent Transactions</h6>
<table class="table table-sm">
<thead>
<tr><th>Txn ID</th><th>Card</th><th>Status</th><th>Reason</th></tr>
</thead>
<tbody>
<tr><td>TX90211</td><td>Debit</td><td class="neg">Declined</td><td>HOST_TIMEOUT</td></tr>
<tr><td>TX90212</td><td>Debit</td><td class="neg">Declined</td><td>HOST_TIMEOUT</td></tr>
</tbody>
</table>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
function selectStore(id){
if(id){
document.getElementById("globalView").style.display="none";
document.getElementById("storeView").style.display="block";
}else{
document.getElementById("storeView").style.display="none";
document.getElementById("globalView").style.display="block";
}
}

function openDetail(){
document.getElementById("detailPanel").style.display="block";
}
function closeDetail(){
document.getElementById("detailPanel").style.display="none";
}
</script>

</body>
</html>
